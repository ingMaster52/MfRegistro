<div class="mx-auto p-6">
  <div class="flex items-center gap-2 mb-10">
    <a class="text-x1 text-gray-700 hover:text-black"> ← </a>
    <h1 class="Prospero-Regular font-normal text-[40px] text-left leading-[48px]">
      Registro
    </h1>
  </div>

  <div
    class="overflow-y-auto scrollbar-thin scrollbar-thumb-scroll-thumb scrollbar-track-scroll-track rounded-md p-4"
  >
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="max-w-656">
      <!-- Tipo de identificación + Número de identificación / NIT + DV -->
      <div class="grid grid-cols-[136px_24px_496px] items-start gap-0 max-w-656">
        <!-- Tipo -->
        <div>
          <label for="tipoIdentificacion" class="block text-sm font-medium mb-1">
            Tipo
          </label>
          <select
            formControlName="tipoIdentificacion"
            id="tipoIdentificacion"
            class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring focus:ring-focusblue/20"
          >
            <option value="CC">C.C.</option>
            <option value="NIT">NIT</option>
          </select>
        </div>
        <div></div>

        <div>
          <!-- Cuando es NIT: Numero NIT + DV -->
          <ng-container *ngIf="esNit; else numeroCompleto">
            <div class="grid grid-cols-[336px_24px_136px] items-center">
              <app-entrada
                label="Número NIT"
                formControlName="numeroNit"
                [state]="getState('numeroNit')"
              ></app-entrada>

              <span class="text-lg text-center">-</span>

              <app-entrada
                label="DV"
                formControlName="dv"
                maxlength="1"
                [state]="getState('dv')"
              ></app-entrada>
            </div>
          </ng-container>

          <!-- Cuando no es NIT: Número de identificación completo -->
          <ng-template #numeroCompleto>
            <app-entrada
              label="Número de identificación"
              formControlName="numeroIdentificacion"
              [state]="getState('numeroIdentificacion')"
            ></app-entrada>
          </ng-template>
        </div>
      </div>

      <!-- Nombre / Razón social -->
      <app-entrada
        [label]="
          form.get('tipoIdentificacion')?.value === 'NIT'
            ? 'Nombre / Razón social'
            : 'Nombre'
        "
        formControlName="nombre"
        [state]="getState('nombre')"
      ></app-entrada>

      <!-- Apellidos (solo si no es NIT) -->
      <div *ngIf="!esNit">
        <app-entrada
          label="Apellido(s)"
          formControlName="apellidos"
          [state]="getState('apellidos')"
        ></app-entrada>
      </div>

      <!-- Indicativo + Celular -->
      <div class="grid grid-cols-[120px_24px_512px] items-center">
        <app-entrada
          label="Indicativo"
          placeholder="+57"
          formControlName="indicativo"
          [state]="getState('indicativo')"
          [disabled]="true"
        ></app-entrada>
        <div></div>

        <app-entrada
          label="Número celular de contacto"
          formControlName="celular"
          [state]="getState('celular')"
        ></app-entrada>
      </div>

      <!-- Correo -->
      <app-entrada
        label="Correo electrónico"
        formControlName="correo"
        [state]="getState('correo')"
      ></app-entrada>

      <!-- Contraseña + Confirmar contraseña -->
      <app-entrada
        label="Contraseña"
        placeholder="********"
        type="password"
        formControlName="password"
        [state]="getState('password')"
      ></app-entrada>

      <app-entrada
        label="Confirmar contraseña"
        placeholder="********"
        type="password"
        formControlName="confirmarPassword"
        [state]="getState('confirmPassword')"
      ></app-entrada>

      <!-- Reglas de contraseña -->
      <div class="max-w-656">
        <p class="font-medium mb-2">La contraseña debe contener:</p>
        <div class="space-y-2">
          <p
            [class.text-errorred]="!passwordRules.longitud"
            [class.text-green-600]="passwordRules.longitud"
          >
            {{ passwordRules.longitud ? "✓" : "✗" }} Longitud entre 8 y 16
            caracteres.
          </p>
          <p
            [class.text-errorred]="!passwordRules.mayuscula"
            [class.text-green-600]="passwordRules.mayuscula"
          >
            {{ passwordRules.mayuscula ? "✓" : "✗" }} Una letra mayúscula (A–Z).
          </p>
          <p
            [class.text-errorred]="!passwordRules.minuscula"
            [class.text-green-600]="passwordRules.minuscula"
          >
            {{ passwordRules.minuscula ? "✓" : "✗" }} Una letra minúscula (a–z).
          </p>
          <p
            [class.text-errorred]="!passwordRules.numero"
            [class.text-green-600]="passwordRules.numero"
          >
            {{ passwordRules.numero ? "✓" : "✗" }} Un número (0–9).
          </p>
          <p
            [class.text-errorred]="!passwordRules.especial"
            [class.text-green-600]="passwordRules.especial"
          >
            {{ passwordRules.especial ? "✓" : "✗" }} Un carácter especial
            (&#64;, #, $, %, &, *, +, -).
          </p>
          <p
            [class.text-errorred]="!passwordRules.noInicial"
            [class.text-green-600]="passwordRules.noInicial"
          >
            {{ passwordRules.noInicial ? "✓" : "✗" }} Sin espacios al principio
            ni al final.
          </p>
        </div>
      </div>

      <!-- Checkboxes -->
      <div class="max-w-656 space-y-4">
        <div class="flex items-start space-x-2">
          <input
            type="checkbox"
            id="terminos"
            formControlName="terminos"
            class="mt-1"
          />
          <label for="terminos" class="text-sm">
            Acepto los
            <a href="#" class="text-focusblue underline">Términos y Condiciones</a>.
          </label>
        </div>

        <div class="flex items-start space-x-1 pt-2 pb-2">
          <input
            type="checkbox"
            id="politica"
            formControlName="politica"
            class="mt-1"
          />
          <label for="politica" class="text-sm">
            Autorizo el tratamiento de mis datos personales en la
            <a href="#" class="text-focusblue underline"
              >Política de tratamiento de datos</a
            >
          </label>
        </div>
      </div>

      <!-- Botón -->
      <button
        class="w-328 h-48 rounded-md bg-brand-dark text-white text-16 font-medium px-6 py-2 hover:bg-brand-hover disabled:bg-brand-light disabled:text-brand-light transition-colors duration-200"
      >
        Registrarme
      </button>
    </form>
  </div>
</div>
